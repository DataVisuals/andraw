<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Andraw</title>
    <link rel="icon" type="image/png" href="logo-transparent.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/pptxgenjs@3.12.0/dist/pptxgen.bundle.js"></script>
</head>
<body>
    <!-- Splash Screen -->
    <div id="splashScreen" class="splash-screen">
        <div class="splash-card">
            <div class="splash-logo-wrapper">
                <img src="logo-transparent.png" alt="Andraw Logo" class="splash-logo" width="120" height="120">
            </div>
            <h1 class="splash-title">Andraw</h1>
            <p class="splash-version">v1.0.0-f08df2c</p>
        </div>
    </div>

    <div class="container">
        <div class="toolbar">
            <!-- FILE/STORAGE GROUP -->
            <div class="toolbar-group" data-group="file">
                <div class="toolbar-group-label">File</div>
                <div class="toolbar-group-content">
                <div class="logo-dropdown-container">
                    <div class="logo" id="logoBtn" title="Quick Load from Browser Storage">
                        <img src="logo-transparent.png" alt="Andraw Logo" class="logo-img" width="32" height="32">
                        <i class="fas fa-caret-down" style="font-size: 10px; margin-left: 2px; color: #fff;"></i>
                    </div>
                    <div class="logo-dropdown" id="logoDropdown">
                        <div class="logo-dropdown-header">Browser Storage</div>
                        <div id="savedDiagramsList" class="saved-diagrams-list">
                            <div class="no-diagrams">No saved diagrams</div>
                        </div>
                    </div>
                </div>
                </div>
            </div>

            <div class="divider"></div>

            <!-- TOOLS GROUP -->
            <div class="toolbar-group" data-group="tools">
                <div class="toolbar-group-label">Tools</div>
                <div class="toolbar-group-content">
            <button class="tool-btn active" data-tool="select" title="Selection (V)">
                <svg width="20" height="20" viewBox="0 0 20 20"><path d="M4 3 L4 17 L9 12 L12 17 L14 16 L11 11 L16 11 Z" fill="currentColor"/></svg>
            </button>
            <button class="tool-btn" data-tool="hand" title="Hand/Pan (H)">
                <i class="fas fa-hand-paper"></i>
            </button>
            <div class="divider"></div>
            <div class="shape-dropdown-container">
                <button class="tool-btn" id="rectangleBtn" title="Rectangle (R)">
                    <svg width="20" height="20" viewBox="0 0 20 20"><rect x="3" y="3" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                    <i class="fas fa-caret-down" style="font-size: 10px; margin-left: 2px;"></i>
                </button>
                <div class="shape-dropdown" id="rectangleDropdown">
                    <button class="shape-item" data-shape="rectangle" data-preset="slate">
                        <svg width="24" height="24" viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="2" fill="#ECF0F1" stroke="#2C3E50" stroke-width="2"/></svg>
                        <span>Slate</span>
                    </button>
                    <button class="shape-item" data-shape="rectangle" data-preset="sage">
                        <svg width="24" height="24" viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="2" fill="#D8E4BC" stroke="#556B2F" stroke-width="2"/></svg>
                        <span>Sage</span>
                    </button>
                    <button class="shape-item" data-shape="rectangle" data-preset="terracotta">
                        <svg width="24" height="24" viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="2" fill="#F4DCC4" stroke="#A0522D" stroke-width="2"/></svg>
                        <span>Terracotta</span>
                    </button>
                    <button class="shape-item" data-shape="rectangle" data-preset="ocean">
                        <svg width="24" height="24" viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="2" fill="#B8D4E8" stroke="#2C5F7F" stroke-width="2"/></svg>
                        <span>Ocean</span>
                    </button>
                    <button class="shape-item" data-shape="rectangle" data-preset="plum">
                        <svg width="24" height="24" viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="2" fill="#E6D9ED" stroke="#6B4C7A" stroke-width="2"/></svg>
                        <span>Plum</span>
                    </button>
                    <button class="shape-item" data-shape="rectangle" data-preset="charcoal">
                        <svg width="24" height="24" viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="2" fill="#E8E6E3" stroke="#3D3D3D" stroke-width="2"/></svg>
                        <span>Charcoal</span>
                    </button>
                    <button class="shape-item" data-shape="rectangle" data-preset="forest">
                        <svg width="24" height="24" viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="2" fill="#C8E6C9" stroke="#2D5016" stroke-width="2"/></svg>
                        <span>Forest</span>
                    </button>
                    <button class="shape-item" data-shape="rectangle" data-preset="burgundy">
                        <svg width="24" height="24" viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="2" fill="#F8E1E7" stroke="#6B2737" stroke-width="2"/></svg>
                        <span>Burgundy</span>
                    </button>
                    <button class="shape-item" data-shape="rectangle" data-preset="navy">
                        <svg width="24" height="24" viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="2" fill="#D1E7F0" stroke="#1A3A52" stroke-width="2"/></svg>
                        <span>Navy</span>
                    </button>
                    <button class="shape-item" data-shape="rectangle" data-preset="copper">
                        <svg width="24" height="24" viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="2" fill="#F5DEB3" stroke="#8B4513" stroke-width="2"/></svg>
                        <span>Copper</span>
                    </button>
                    <button class="shape-item" data-shape="rectangle" data-preset="moss">
                        <svg width="24" height="24" viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="2" fill="#E3EAC2" stroke="#4A5D23" stroke-width="2"/></svg>
                        <span>Moss</span>
                    </button>
                </div>
            </div>
            <div class="shape-dropdown-container">
                <button class="tool-btn" id="circleBtn" title="Circle (C)">
                    <svg width="20" height="20" viewBox="0 0 20 20"><circle cx="10" cy="10" r="7" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                    <i class="fas fa-caret-down" style="font-size: 10px; margin-left: 2px;"></i>
                </button>
                <div class="shape-dropdown" id="circleDropdown">
                    <button class="shape-item" data-shape="circle" data-preset="slate">
                        <svg width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#ECF0F1" stroke="#2C3E50" stroke-width="2"/></svg>
                        <span>Slate</span>
                    </button>
                    <button class="shape-item" data-shape="circle" data-preset="sage">
                        <svg width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#D8E4BC" stroke="#556B2F" stroke-width="2"/></svg>
                        <span>Sage</span>
                    </button>
                    <button class="shape-item" data-shape="circle" data-preset="terracotta">
                        <svg width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#F4DCC4" stroke="#A0522D" stroke-width="2"/></svg>
                        <span>Terracotta</span>
                    </button>
                    <button class="shape-item" data-shape="circle" data-preset="ocean">
                        <svg width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#B8D4E8" stroke="#2C5F7F" stroke-width="2"/></svg>
                        <span>Ocean</span>
                    </button>
                    <button class="shape-item" data-shape="circle" data-preset="plum">
                        <svg width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#E6D9ED" stroke="#6B4C7A" stroke-width="2"/></svg>
                        <span>Plum</span>
                    </button>
                    <button class="shape-item" data-shape="circle" data-preset="charcoal">
                        <svg width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#E8E6E3" stroke="#3D3D3D" stroke-width="2"/></svg>
                        <span>Charcoal</span>
                    </button>
                    <button class="shape-item" data-shape="circle" data-preset="forest">
                        <svg width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#C8E6C9" stroke="#2D5016" stroke-width="2"/></svg>
                        <span>Forest</span>
                    </button>
                    <button class="shape-item" data-shape="circle" data-preset="burgundy">
                        <svg width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#F8E1E7" stroke="#6B2737" stroke-width="2"/></svg>
                        <span>Burgundy</span>
                    </button>
                    <button class="shape-item" data-shape="circle" data-preset="navy">
                        <svg width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#D1E7F0" stroke="#1A3A52" stroke-width="2"/></svg>
                        <span>Navy</span>
                    </button>
                    <button class="shape-item" data-shape="circle" data-preset="copper">
                        <svg width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#F5DEB3" stroke="#8B4513" stroke-width="2"/></svg>
                        <span>Copper</span>
                    </button>
                    <button class="shape-item" data-shape="circle" data-preset="moss">
                        <svg width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#E3EAC2" stroke="#4A5D23" stroke-width="2"/></svg>
                        <span>Moss</span>
                    </button>
                </div>
            </div>
            <div class="divider"></div>
            <button class="tool-btn" data-tool="line" title="Line (L)">
                <svg width="20" height="20" viewBox="0 0 20 20"><line x1="3" y1="17" x2="17" y2="3" stroke="currentColor" stroke-width="2"/></svg>
            </button>
            <button class="tool-btn" data-tool="arrow" title="Arrow (A)">
                <svg width="20" height="20" viewBox="0 0 20 20"><path d="M3 17 L17 3 M17 3 L12 3 M17 3 L17 8" fill="none" stroke="currentColor" stroke-width="2"/></svg>
            </button>
            <div class="divider"></div>
            <button class="tool-btn" data-tool="pen" title="Pen (P)">
                <svg width="20" height="20" viewBox="0 0 20 20"><path d="M3 17 Q 7 10, 10 10 T 17 3" fill="none" stroke="currentColor" stroke-width="2"/></svg>
            </button>
            <button class="tool-btn" data-tool="text" title="Text (T)">
                <svg width="20" height="20" viewBox="0 0 20 20"><text x="10" y="15" text-anchor="middle" font-size="14" fill="currentColor">T</text></svg>
            </button>
                </div>
            </div>

            <div class="divider"></div>

            <!-- APPEARANCE GROUP -->
            <div class="toolbar-group" data-group="style">
                <div class="toolbar-group-label">Style</div>
                <div class="toolbar-group-content">
            <div class="color-picker-icon" title="Border/Stroke Color">
                <input type="color" id="strokeColor" value="#2C3E50">
                <div class="color-icon-border" id="strokeIcon"></div>
            </div>
            <div class="color-picker-icon" title="Fill Color">
                <input type="color" id="fillColor" value="#ECF0F1">
                <div class="color-icon-fill" id="fillIcon"></div>
            </div>
            <div class="color-picker-wrapper" title="Background Color">
                <input type="color" id="bgColor" value="#FFFEF9">
                <div class="color-label" id="bgLabel">Background</div>
            </div>
            <label>
                <input type="checkbox" id="fillEnabled"> Fill
            </label>
            <label>
                <input type="checkbox" id="shadowEnabled"> Shadow
            </label>
            <div class="divider"></div>
            <div class="font-dropdown-container">
                <button class="tool-btn" id="fontBtn" title="Font Family">
                    <span id="fontBtnText">Handwritten</span>
                    <i class="fas fa-caret-down" style="font-size: 10px; margin-left: 4px;"></i>
                </button>
                <div class="font-dropdown" id="fontDropdown">
                    <button class="font-item" data-font="Comic Sans MS, cursive" data-name="Handwritten">
                        <span style="font-family: 'Comic Sans MS', cursive;">Handwritten</span>
                    </button>
                    <button class="font-item" data-font="Arial, sans-serif" data-name="Arial">
                        <span style="font-family: Arial, sans-serif;">Arial</span>
                    </button>
                    <button class="font-item" data-font="Helvetica, sans-serif" data-name="Helvetica">
                        <span style="font-family: Helvetica, sans-serif;">Helvetica</span>
                    </button>
                    <button class="font-item" data-font="Verdana, sans-serif" data-name="Verdana">
                        <span style="font-family: Verdana, sans-serif;">Verdana</span>
                    </button>
                    <button class="font-item" data-font="Trebuchet MS, sans-serif" data-name="Trebuchet">
                        <span style="font-family: 'Trebuchet MS', sans-serif;">Trebuchet</span>
                    </button>
                    <button class="font-item" data-font="Georgia, serif" data-name="Georgia">
                        <span style="font-family: Georgia, serif;">Georgia</span>
                    </button>
                    <button class="font-item" data-font="Times New Roman, serif" data-name="Times">
                        <span style="font-family: 'Times New Roman', serif;">Times</span>
                    </button>
                    <button class="font-item" data-font="Palatino, serif" data-name="Palatino">
                        <span style="font-family: Palatino, serif;">Palatino</span>
                    </button>
                    <button class="font-item" data-font="Courier New, monospace" data-name="Courier">
                        <span style="font-family: 'Courier New', monospace;">Courier</span>
                    </button>
                    <button class="font-item" data-font="Monaco, monospace" data-name="Monaco">
                        <span style="font-family: Monaco, monospace;">Monaco</span>
                    </button>
                    <button class="font-item" data-font="Consolas, monospace" data-name="Consolas">
                        <span style="font-family: Consolas, monospace;">Consolas</span>
                    </button>
                    <button class="font-item" data-font="Impact, fantasy" data-name="Impact">
                        <span style="font-family: Impact, fantasy;">Impact</span>
                    </button>
                    <button class="font-item" data-font="Brush Script MT, cursive" data-name="Brush Script">
                        <span style="font-family: 'Brush Script MT', cursive;">Brush Script</span>
                    </button>
                    <button class="font-item" data-font="Lucida Console, monospace" data-name="Lucida Console">
                        <span style="font-family: 'Lucida Console', monospace;">Lucida Console</span>
                    </button>
                </div>
            </div>
                    <select id="fontSizeSelect" title="Font Size">
                        <option value="10">10px</option>
                        <option value="12">12px</option>
                        <option value="14">14px</option>
                        <option value="16" selected>16px</option>
                        <option value="18">18px</option>
                        <option value="20">20px</option>
                        <option value="24">24px</option>
                        <option value="28">28px</option>
                        <option value="32">32px</option>
                        <option value="36">36px</option>
                        <option value="48">48px</option>
                        <option value="64">64px</option>
                    </select>
                    <div class="color-picker-icon" title="Text Color">
                        <input type="color" id="textColor" value="#2C3E50">
                        <div class="color-icon-text" id="textColorIcon"></div>
                    </div>
                    <button class="text-style-btn" id="boldBtn" title="Bold">
                        <i class="fas fa-bold"></i>
                    </button>
                    <button class="text-style-btn" id="italicBtn" title="Italic">
                        <i class="fas fa-italic"></i>
                    </button>
                    <div class="line-options-dropdown-container">
                        <button class="tool-btn" id="lineOptionsBtn" title="Line Options">
                            <svg width="20" height="20" viewBox="0 0 20 20">
                                <line x1="2" y1="10" x2="18" y2="10" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            <i class="fas fa-caret-down" style="font-size: 10px; margin-left: 2px;"></i>
                        </button>
                        <div class="line-options-dropdown" id="lineOptionsDropdown">
                            <div class="line-options-header">Straight Lines</div>
                            <div class="line-options-row">
                                <button class="line-combo-btn" data-style="solid" data-routing="straight" data-thickness="1" title="Straight · Solid · 1px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><line x1="4" y1="8" x2="44" y2="8" stroke="#666" stroke-width="1"/></svg>
                                </button>
                                <button class="line-combo-btn active" data-style="solid" data-routing="straight" data-thickness="2" title="Straight · Solid · 2px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><line x1="4" y1="8" x2="44" y2="8" stroke="#666" stroke-width="2"/></svg>
                                </button>
                                <button class="line-combo-btn" data-style="solid" data-routing="straight" data-thickness="4" title="Straight · Solid · 4px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><line x1="4" y1="8" x2="44" y2="8" stroke="#666" stroke-width="4"/></svg>
                                </button>
                                <button class="line-combo-btn" data-style="solid" data-routing="straight" data-thickness="6" title="Straight · Solid · 6px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><line x1="4" y1="8" x2="44" y2="8" stroke="#666" stroke-width="6"/></svg>
                                </button>
                            </div>
                            <div class="line-options-row">
                                <button class="line-combo-btn" data-style="dashed" data-routing="straight" data-thickness="1" title="Straight · Dashed · 1px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><line x1="4" y1="8" x2="44" y2="8" stroke="#666" stroke-width="1" stroke-dasharray="4,3"/></svg>
                                </button>
                                <button class="line-combo-btn" data-style="dashed" data-routing="straight" data-thickness="2" title="Straight · Dashed · 2px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><line x1="4" y1="8" x2="44" y2="8" stroke="#666" stroke-width="2" stroke-dasharray="4,3"/></svg>
                                </button>
                                <button class="line-combo-btn" data-style="dashed" data-routing="straight" data-thickness="4" title="Straight · Dashed · 4px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><line x1="4" y1="8" x2="44" y2="8" stroke="#666" stroke-width="4" stroke-dasharray="6,4"/></svg>
                                </button>
                                <button class="line-combo-btn" data-style="dashed" data-routing="straight" data-thickness="6" title="Straight · Dashed · 6px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><line x1="4" y1="8" x2="44" y2="8" stroke="#666" stroke-width="6" stroke-dasharray="8,5"/></svg>
                                </button>
                            </div>
                            <div class="line-options-row">
                                <button class="line-combo-btn" data-style="dotted" data-routing="straight" data-thickness="1" title="Straight · Dotted · 1px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><line x1="4" y1="8" x2="44" y2="8" stroke="#666" stroke-width="1" stroke-dasharray="1,3"/></svg>
                                </button>
                                <button class="line-combo-btn" data-style="dotted" data-routing="straight" data-thickness="2" title="Straight · Dotted · 2px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><line x1="4" y1="8" x2="44" y2="8" stroke="#666" stroke-width="2" stroke-dasharray="1,3"/></svg>
                                </button>
                                <button class="line-combo-btn" data-style="dotted" data-routing="straight" data-thickness="4" title="Straight · Dotted · 4px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><line x1="4" y1="8" x2="44" y2="8" stroke="#666" stroke-width="4" stroke-dasharray="1,4"/></svg>
                                </button>
                                <button class="line-combo-btn" data-style="dotted" data-routing="straight" data-thickness="6" title="Straight · Dotted · 6px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><line x1="4" y1="8" x2="44" y2="8" stroke="#666" stroke-width="6" stroke-dasharray="1,5"/></svg>
                                </button>
                            </div>
                            <div class="line-options-header">Stepped Lines</div>
                            <div class="line-options-row">
                                <button class="line-combo-btn" data-style="solid" data-routing="stepped" data-thickness="1" title="Stepped · Solid · 1px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><path d="M 4 12 L 20 12 L 20 4 L 44 4" stroke="#666" stroke-width="1" fill="none"/></svg>
                                </button>
                                <button class="line-combo-btn" data-style="solid" data-routing="stepped" data-thickness="2" title="Stepped · Solid · 2px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><path d="M 4 12 L 20 12 L 20 4 L 44 4" stroke="#666" stroke-width="2" fill="none"/></svg>
                                </button>
                                <button class="line-combo-btn" data-style="solid" data-routing="stepped" data-thickness="4" title="Stepped · Solid · 4px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><path d="M 4 12 L 20 12 L 20 4 L 44 4" stroke="#666" stroke-width="4" fill="none"/></svg>
                                </button>
                                <button class="line-combo-btn" data-style="solid" data-routing="stepped" data-thickness="6" title="Stepped · Solid · 6px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><path d="M 4 12 L 20 12 L 20 4 L 44 4" stroke="#666" stroke-width="6" fill="none"/></svg>
                                </button>
                            </div>
                            <div class="line-options-row">
                                <button class="line-combo-btn" data-style="dashed" data-routing="stepped" data-thickness="1" title="Stepped · Dashed · 1px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><path d="M 4 12 L 20 12 L 20 4 L 44 4" stroke="#666" stroke-width="1" fill="none" stroke-dasharray="4,3"/></svg>
                                </button>
                                <button class="line-combo-btn" data-style="dashed" data-routing="stepped" data-thickness="2" title="Stepped · Dashed · 2px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><path d="M 4 12 L 20 12 L 20 4 L 44 4" stroke="#666" stroke-width="2" fill="none" stroke-dasharray="4,3"/></svg>
                                </button>
                                <button class="line-combo-btn" data-style="dashed" data-routing="stepped" data-thickness="4" title="Stepped · Dashed · 4px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><path d="M 4 12 L 20 12 L 20 4 L 44 4" stroke="#666" stroke-width="4" fill="none" stroke-dasharray="6,4"/></svg>
                                </button>
                                <button class="line-combo-btn" data-style="dashed" data-routing="stepped" data-thickness="6" title="Stepped · Dashed · 6px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><path d="M 4 12 L 20 12 L 20 4 L 44 4" stroke="#666" stroke-width="6" fill="none" stroke-dasharray="8,5"/></svg>
                                </button>
                            </div>
                            <div class="line-options-row">
                                <button class="line-combo-btn" data-style="dotted" data-routing="stepped" data-thickness="1" title="Stepped · Dotted · 1px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><path d="M 4 12 L 20 12 L 20 4 L 44 4" stroke="#666" stroke-width="1" fill="none" stroke-dasharray="1,3"/></svg>
                                </button>
                                <button class="line-combo-btn" data-style="dotted" data-routing="stepped" data-thickness="2" title="Stepped · Dotted · 2px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><path d="M 4 12 L 20 12 L 20 4 L 44 4" stroke="#666" stroke-width="2" fill="none" stroke-dasharray="1,3"/></svg>
                                </button>
                                <button class="line-combo-btn" data-style="dotted" data-routing="stepped" data-thickness="4" title="Stepped · Dotted · 4px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><path d="M 4 12 L 20 12 L 20 4 L 44 4" stroke="#666" stroke-width="4" fill="none" stroke-dasharray="1,4"/></svg>
                                </button>
                                <button class="line-combo-btn" data-style="dotted" data-routing="stepped" data-thickness="6" title="Stepped · Dotted · 6px">
                                    <svg width="48" height="16" viewBox="0 0 48 16"><path d="M 4 12 L 20 12 L 20 4 L 44 4" stroke="#666" stroke-width="6" fill="none" stroke-dasharray="1,5"/></svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="toolbar-spacer"></div>

            <!-- CANVAS/VIEW GROUP -->
            <div class="toolbar-group" data-group="view">
                <div class="toolbar-group-label">View</div>
                <div class="toolbar-group-content">
            <button class="action-btn" id="gridToggleBtn" title="Toggle Grid (G)">
                <i class="fas fa-border-all"></i>
            </button>
            <button class="action-btn" id="snapToggleBtn" title="Toggle Snap to Grid (Shift+G)">
                <i class="fas fa-magnet"></i>
            </button>
            <div class="divider"></div>
            <button class="action-btn" id="modeToggleBtn" title="Toggle Mode: Infinite Canvas / Storybook">
                <i class="fas fa-expand-arrows-alt"></i>
            </button>
            <div class="divider"></div>
            <div class="zoom-dropdown-container">
                <button class="action-btn" id="zoomBtn" title="Zoom Controls">
                    <i class="fas fa-search"></i>
                    <i class="fas fa-caret-down" style="font-size: 10px; margin-left: 2px;"></i>
                </button>
                <div class="zoom-dropdown" id="zoomDropdown">
                    <button class="zoom-option-btn" id="zoomFit">
                        <i class="fas fa-expand"></i>
                        <span>Fit to Screen</span>
                    </button>
                    <button class="zoom-option-btn" id="zoomReset">
                        <i class="fas fa-redo"></i>
                        <span>Reset (100%)</span>
                    </button>
                    <div class="zoom-divider"></div>
                    <button class="zoom-option-btn" id="zoom50">
                        <span>50%</span>
                    </button>
                    <button class="zoom-option-btn" id="zoom100">
                        <span>100%</span>
                    </button>
                    <button class="zoom-option-btn" id="zoom150">
                        <span>150%</span>
                    </button>
                    <button class="zoom-option-btn" id="zoom200">
                        <span>200%</span>
                    </button>
                </div>
            </div>
                </div>
            </div>

            <div class="divider"></div>

            <!-- ARRANGE GROUP -->
            <div class="toolbar-group" data-group="arrange">
                <div class="toolbar-group-label">Arrange</div>
                <div class="toolbar-group-content">
            <button class="action-btn" id="layoutHorizontalBtn" title="Layout Horizontally">
                <i class="fas fa-arrows-alt-h"></i>
            </button>
            <button class="action-btn" id="layoutVerticalBtn" title="Layout Vertically">
                <i class="fas fa-arrows-alt-v"></i>
            </button>
            <div class="divider"></div>
            <div class="align-dropdown-container">
                <button class="action-btn" id="alignBtn" title="Align & Distribute">
                    <i class="fas fa-align-left"></i>
                    <i class="fas fa-caret-down" style="font-size: 10px; margin-left: 2px;"></i>
                </button>
                <div class="align-dropdown" id="alignDropdown">
                    <div class="align-section">
                        <div class="align-label">Align</div>
                        <div class="align-row">
                            <button class="align-btn" id="alignLeft" title="Align Left">
                                <i class="fas fa-align-left"></i>
                            </button>
                            <button class="align-btn" id="alignCenter" title="Align Center">
                                <i class="fas fa-align-center"></i>
                            </button>
                            <button class="align-btn" id="alignRight" title="Align Right">
                                <i class="fas fa-align-right"></i>
                            </button>
                        </div>
                        <div class="align-row">
                            <button class="align-btn" id="alignTop" title="Align Top">
                                <i class="fas fa-arrow-up"></i>
                            </button>
                            <button class="align-btn" id="alignMiddle" title="Align Middle">
                                <i class="fas fa-arrows-alt-v"></i>
                            </button>
                            <button class="align-btn" id="alignBottom" title="Align Bottom">
                                <i class="fas fa-arrow-down"></i>
                            </button>
                        </div>
                    </div>
                    <div class="align-section">
                        <div class="align-label">Distribute</div>
                        <div class="align-row">
                            <button class="align-btn" id="distributeH" title="Distribute Horizontally">
                                <i class="fas fa-arrows-alt-h"></i>
                            </button>
                            <button class="align-btn" id="distributeV" title="Distribute Vertically">
                                <i class="fas fa-arrows-alt-v"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="divider"></div>
            <div class="selection-dropdown-container">
                <button class="action-btn" id="selectionBtn" title="Selection Tools">
                    <i class="fas fa-mouse-pointer"></i>
                    <i class="fas fa-caret-down" style="font-size: 10px; margin-left: 2px;"></i>
                </button>
                <div class="selection-dropdown" id="selectionDropdown">
                    <button class="selection-option-btn" id="selectAllBtn">
                        <i class="fas fa-border-all"></i>
                        <span>Select All</span>
                    </button>
                    <button class="selection-option-btn" id="lockSelectionBtn">
                        <i class="fas fa-lock"></i>
                        <span>Lock/Unlock</span>
                    </button>
                    <div class="selection-divider"></div>
                    <div class="selection-label">Select by Type</div>
                    <button class="selection-option-btn" id="selectRectangles">
                        <span>Rectangles</span>
                    </button>
                    <button class="selection-option-btn" id="selectCircles">
                        <span>Circles</span>
                    </button>
                    <button class="selection-option-btn" id="selectLines">
                        <span>Lines</span>
                    </button>
                    <button class="selection-option-btn" id="selectArrows">
                        <span>Arrows</span>
                    </button>
                    <button class="selection-option-btn" id="selectText">
                        <span>Text</span>
                    </button>
                </div>
            </div>
                </div>
            </div>

            <div class="divider"></div>

            <!-- HISTORY GROUP -->
            <div class="toolbar-group" data-group="history">
                <div class="toolbar-group-label">History</div>
                <div class="toolbar-group-content">
            <button class="action-btn" id="undoBtn" title="Undo (Ctrl+Z)">
                <i class="fas fa-undo"></i>
            </button>
                </div>
            </div>

            <div class="divider"></div>

            <!-- FILE OPERATIONS GROUP -->
            <div class="toolbar-group" data-group="file-ops">
                <div class="toolbar-group-label">Export</div>
                <div class="toolbar-group-content">
            <button class="action-btn" id="exportImage" title="Export as Image/PowerPoint">
                <i class="fas fa-download"></i>
            </button>
            <button class="action-btn" id="exportJSON" title="Save to File + Browser Storage">
                <i class="fas fa-save"></i>
            </button>
            <button class="action-btn" id="changelogBtn" title="What's New">
                <i class="fas fa-star"></i>
            </button>
            <button class="action-btn" id="importJSON" title="Load from File (also saves to Browser Storage)">
                <i class="fas fa-folder-open"></i>
            </button>
            <button class="action-btn" id="clearBtn" title="Clear Canvas">
                <i class="fas fa-trash-alt"></i>
            </button>
                </div>
            </div>
            <input type="file" id="fileInput" accept=".json" style="display: none;">
        </div>
        <div class="main-content">
            <div class="templates-panel">
                <h3>Templates</h3>

                <div class="template-category">
                    <div class="category-header" data-category="flowchart">
                        <i class="fas fa-project-diagram"></i>
                        <span>Flowchart</span>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div class="template-items">
                        <button class="template-btn" data-template="process">
                            <i class="far fa-square"></i>Process
                        </button>
                        <button class="template-btn" data-template="decision">
                            <i class="fas fa-gem"></i>Decision
                        </button>
                        <button class="template-btn" data-template="data">
                            <i class="fas fa-align-justify"></i>Data
                        </button>
                        <button class="template-btn" data-template="terminator">
                            <i class="fas fa-capsules"></i>Terminator
                        </button>
                        <button class="template-btn" data-template="document">
                            <i class="far fa-file-alt"></i>Document
                        </button>
                        <button class="template-btn" data-template="predefined-process">
                            <i class="fas fa-th-large"></i>Predefined
                        </button>
                        <button class="template-btn" data-template="manual-input">
                            <i class="fas fa-keyboard"></i>Manual Input
                        </button>
                        <button class="template-btn" data-template="delay">
                            <i class="fas fa-hourglass-half"></i>Delay
                        </button>
                        <button class="template-btn" data-template="merge">
                            <i class="fas fa-code-branch"></i>Merge
                        </button>
                        <button class="template-btn" data-template="display">
                            <i class="fas fa-tv"></i>Display
                        </button>
                        <button class="template-btn" data-template="manual-operation">
                            <i class="fas fa-hand-paper"></i>Manual Op
                        </button>
                    </div>
                </div>

                <div class="template-category">
                    <div class="category-header" data-category="uml">
                        <i class="fas fa-sitemap"></i>
                        <span>UML</span>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div class="template-items">
                        <button class="template-btn" data-template="class">
                            <i class="fas fa-square"></i>Class
                        </button>
                        <button class="template-btn" data-template="actor">
                            <i class="fas fa-user"></i>Actor
                        </button>
                        <button class="template-btn" data-template="package">
                            <i class="fas fa-box"></i>Package
                        </button>
                    </div>
                </div>

                <div class="template-category">
                    <div class="category-header" data-category="technology">
                        <i class="fas fa-microchip"></i>
                        <span>Technology</span>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div class="template-items">
                        <button class="template-btn" data-template="server">
                            <i class="fas fa-server"></i>Server
                        </button>
                        <button class="template-btn" data-template="database">
                            <i class="fas fa-database"></i>Database
                        </button>
                        <button class="template-btn" data-template="cloud">
                            <i class="fas fa-cloud"></i>Cloud
                        </button>
                        <button class="template-btn" data-template="lambda">
                            <i class="fas fa-code"></i>Lambda
                        </button>
                        <button class="template-btn" data-template="storage">
                            <i class="fas fa-hdd"></i>Storage
                        </button>
                        <button class="template-btn" data-template="queue">
                            <i class="fas fa-stream"></i>Queue
                        </button>
                    </div>
                </div>

                <div class="template-category">
                    <div class="category-header" data-category="aws">
                        <i class="fab fa-aws"></i>
                        <span>AWS</span>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div class="template-items">
                        <div class="template-subcategory">
                            <div class="subcategory-header" data-category="aws-compute">
                                <i class="fas fa-microchip"></i>
                                <span>Compute</span>
                                <i class="fas fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="subcategory-items">
                                <button class="template-btn" data-template="ec2">
                                    <i class="fas fa-server"></i>EC2
                                </button>
                                <button class="template-btn" data-template="lambda">
                                    <i class="fas fa-code"></i>Lambda
                                </button>
                                <button class="template-btn" data-template="fargate">
                                    <i class="fas fa-box-open"></i>Fargate
                                </button>
                                <button class="template-btn" data-template="batch">
                                    <i class="fas fa-tasks"></i>Batch
                                </button>
                                <button class="template-btn" data-template="ecs">
                                    <i class="fas fa-box-open"></i>ECS
                                </button>
                                <button class="template-btn" data-template="eks">
                                    <i class="fas fa-cubes"></i>EKS
                                </button>
                            </div>
                        </div>

                        <div class="template-subcategory">
                            <div class="subcategory-header" data-category="aws-storage">
                                <i class="fas fa-hdd"></i>
                                <span>Storage</span>
                                <i class="fas fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="subcategory-items">
                                <button class="template-btn" data-template="s3">
                                    <i class="fas fa-box"></i>S3
                                </button>
                                <button class="template-btn" data-template="ebs">
                                    <i class="fas fa-database"></i>EBS
                                </button>
                                <button class="template-btn" data-template="efs">
                                    <i class="fas fa-folder"></i>EFS
                                </button>
                                <button class="template-btn" data-template="glacier">
                                    <i class="fas fa-snowflake"></i>Glacier
                                </button>
                            </div>
                        </div>

                        <div class="template-subcategory">
                            <div class="subcategory-header" data-category="aws-database">
                                <i class="fas fa-database"></i>
                                <span>Database</span>
                                <i class="fas fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="subcategory-items">
                                <button class="template-btn" data-template="rds">
                                    <i class="fas fa-database"></i>RDS
                                </button>
                                <button class="template-btn" data-template="dynamodb">
                                    <i class="fas fa-table"></i>DynamoDB
                                </button>
                                <button class="template-btn" data-template="aurora">
                                    <i class="fas fa-star"></i>Aurora
                                </button>
                                <button class="template-btn" data-template="elasticache">
                                    <i class="fas fa-memory"></i>ElastiCache
                                </button>
                                <button class="template-btn" data-template="neptune">
                                    <i class="fas fa-project-diagram"></i>Neptune
                                </button>
                                <button class="template-btn" data-template="documentdb">
                                    <i class="fas fa-file-alt"></i>DocumentDB
                                </button>
                            </div>
                        </div>

                        <div class="template-subcategory">
                            <div class="subcategory-header" data-category="aws-networking">
                                <i class="fas fa-network-wired"></i>
                                <span>Networking</span>
                                <i class="fas fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="subcategory-items">
                                <button class="template-btn" data-template="vpc">
                                    <i class="fas fa-project-diagram"></i>VPC
                                </button>
                                <button class="template-btn" data-template="cloudfront">
                                    <i class="fas fa-globe"></i>CloudFront
                                </button>
                                <button class="template-btn" data-template="route53">
                                    <i class="fas fa-network-wired"></i>Route 53
                                </button>
                                <button class="template-btn" data-template="api-gateway">
                                    <i class="fas fa-plug"></i>API Gateway
                                </button>
                                <button class="template-btn" data-template="elb">
                                    <i class="fas fa-balance-scale"></i>ELB
                                </button>
                                <button class="template-btn" data-template="directconnect">
                                    <i class="fas fa-link"></i>Direct Connect
                                </button>
                                <button class="template-btn" data-template="transitgateway">
                                    <i class="fas fa-road"></i>Transit Gateway
                                </button>
                                <button class="template-btn" data-template="natgateway">
                                    <i class="fas fa-random"></i>NAT Gateway
                                </button>
                            </div>
                        </div>

                        <div class="template-subcategory">
                            <div class="subcategory-header" data-category="aws-security">
                                <i class="fas fa-shield-alt"></i>
                                <span>Security</span>
                                <i class="fas fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="subcategory-items">
                                <button class="template-btn" data-template="iam">
                                    <i class="fas fa-user-shield"></i>IAM
                                </button>
                                <button class="template-btn" data-template="cognito">
                                    <i class="fas fa-users-cog"></i>Cognito
                                </button>
                                <button class="template-btn" data-template="secretsmanager">
                                    <i class="fas fa-key"></i>Secrets Manager
                                </button>
                                <button class="template-btn" data-template="waf">
                                    <i class="fas fa-shield-alt"></i>WAF
                                </button>
                            </div>
                        </div>

                        <div class="template-subcategory">
                            <div class="subcategory-header" data-category="aws-devtools">
                                <i class="fas fa-tools"></i>
                                <span>Dev Tools</span>
                                <i class="fas fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="subcategory-items">
                                <button class="template-btn" data-template="codepipeline">
                                    <i class="fas fa-stream"></i>CodePipeline
                                </button>
                                <button class="template-btn" data-template="codebuild">
                                    <i class="fas fa-hammer"></i>CodeBuild
                                </button>
                                <button class="template-btn" data-template="codedeploy">
                                    <i class="fas fa-rocket"></i>CodeDeploy
                                </button>
                                <button class="template-btn" data-template="codecommit">
                                    <i class="fas fa-code-branch"></i>CodeCommit
                                </button>
                            </div>
                        </div>

                        <div class="template-subcategory">
                            <div class="subcategory-header" data-category="aws-integration">
                                <i class="fas fa-plug"></i>
                                <span>Integration</span>
                                <i class="fas fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="subcategory-items">
                                <button class="template-btn" data-template="sqs">
                                    <i class="fas fa-stream"></i>SQS
                                </button>
                                <button class="template-btn" data-template="sns">
                                    <i class="fas fa-bell"></i>SNS
                                </button>
                                <button class="template-btn" data-template="eventbridge">
                                    <i class="fas fa-calendar-alt"></i>EventBridge
                                </button>
                                <button class="template-btn" data-template="stepfunctions">
                                    <i class="fas fa-sitemap"></i>Step Functions
                                </button>
                                <button class="template-btn" data-template="appsync">
                                    <i class="fas fa-sync"></i>AppSync
                                </button>
                            </div>
                        </div>

                        <div class="template-subcategory">
                            <div class="subcategory-header" data-category="aws-analytics">
                                <i class="fas fa-chart-bar"></i>
                                <span>Analytics & ML</span>
                                <i class="fas fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="subcategory-items">
                                <button class="template-btn" data-template="athena">
                                    <i class="fas fa-search"></i>Athena
                                </button>
                                <button class="template-btn" data-template="redshift">
                                    <i class="fas fa-warehouse"></i>Redshift
                                </button>
                                <button class="template-btn" data-template="kinesis">
                                    <i class="fas fa-stream"></i>Kinesis
                                </button>
                                <button class="template-btn" data-template="emr">
                                    <i class="fas fa-server"></i>EMR
                                </button>
                                <button class="template-btn" data-template="sagemaker">
                                    <i class="fas fa-brain"></i>SageMaker
                                </button>
                                <button class="template-btn" data-template="glue">
                                    <i class="fas fa-magic"></i>Glue
                                </button>
                            </div>
                        </div>

                        <div class="template-subcategory">
                            <div class="subcategory-header" data-category="aws-management">
                                <i class="fas fa-chart-line"></i>
                                <span>Management</span>
                                <i class="fas fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="subcategory-items">
                                <button class="template-btn" data-template="cloudwatch">
                                    <i class="fas fa-chart-line"></i>CloudWatch
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="template-category">
                    <div class="category-header" data-category="azure">
                        <i class="fab fa-microsoft"></i>
                        <span>Azure</span>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div class="template-items">
                        <button class="template-btn" data-template="azure-vm">
                            <i class="fas fa-server"></i>VM
                        </button>
                        <button class="template-btn" data-template="azure-functions">
                            <i class="fas fa-code"></i>Functions
                        </button>
                        <button class="template-btn" data-template="azure-storage">
                            <i class="fas fa-hdd"></i>Storage
                        </button>
                        <button class="template-btn" data-template="azure-sql">
                            <i class="fas fa-database"></i>SQL
                        </button>
                        <button class="template-btn" data-template="azure-vnet">
                            <i class="fas fa-project-diagram"></i>VNet
                        </button>
                    </div>
                </div>

                <div class="template-category">
                    <div class="category-header" data-category="gcp">
                        <i class="fab fa-google"></i>
                        <span>Google Cloud</span>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div class="template-items">
                        <button class="template-btn" data-template="gcp-computeengine">
                            <i class="fas fa-server"></i>Compute
                        </button>
                        <button class="template-btn" data-template="gcp-cloudfunctions">
                            <i class="fas fa-code"></i>Functions
                        </button>
                        <button class="template-btn" data-template="gcp-storage">
                            <i class="fas fa-hdd"></i>Storage
                        </button>
                        <button class="template-btn" data-template="gcp-cloudsql">
                            <i class="fas fa-database"></i>SQL
                        </button>
                        <button class="template-btn" data-template="gcp-vpc">
                            <i class="fas fa-project-diagram"></i>VPC
                        </button>
                    </div>
                </div>

                <div class="template-category">
                    <div class="category-header" data-category="shapes">
                        <i class="fas fa-shapes"></i>
                        <span>Shapes</span>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div class="template-items">
                        <button class="template-btn" data-template="hexagon">
                            <i class="fas fa-stop"></i>Hexagon
                        </button>
                        <button class="template-btn" data-template="pentagon">
                            <i class="fas fa-stop"></i>Pentagon
                        </button>
                        <button class="template-btn" data-template="octagon">
                            <i class="fas fa-stop"></i>Octagon
                        </button>
                        <button class="template-btn" data-template="triangle">
                            <i class="fas fa-caret-up"></i>Triangle
                        </button>
                        <button class="template-btn" data-template="trapezoid">
                            <i class="fas fa-square"></i>Trapezoid
                        </button>
                        <button class="template-btn" data-template="star">
                            <i class="fas fa-star"></i>Star
                        </button>
                        <button class="template-btn" data-template="cross">
                            <i class="fas fa-plus"></i>Cross
                        </button>
                        <button class="template-btn" data-template="arrow-right">
                            <i class="fas fa-arrow-right"></i>Arrow Right
                        </button>
                        <button class="template-btn" data-template="arrow-left">
                            <i class="fas fa-arrow-left"></i>Arrow Left
                        </button>
                        <button class="template-btn" data-template="speech-bubble">
                            <i class="fas fa-comment"></i>Speech
                        </button>
                        <button class="template-btn" data-template="heart">
                            <i class="fas fa-heart"></i>Heart
                        </button>
                        <button class="template-btn" data-template="note">
                            <i class="fas fa-sticky-note"></i>Note
                        </button>
                        <button class="template-btn" data-template="cylinder">
                            <i class="fas fa-drum"></i>Cylinder
                        </button>
                    </div>
                </div>

                <div class="template-category">
                    <div class="category-header" data-category="kubernetes">
                        <i class="fas fa-dharmachakra"></i>
                        <span>Kubernetes</span>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div class="template-items">
                        <button class="template-btn" data-template="k8s-pod">
                            <i class="fas fa-cube"></i>Pod
                        </button>
                        <button class="template-btn" data-template="k8s-service">
                            <i class="fas fa-network-wired"></i>Service
                        </button>
                        <button class="template-btn" data-template="k8s-deployment">
                            <i class="fas fa-layer-group"></i>Deployment
                        </button>
                        <button class="template-btn" data-template="k8s-configmap">
                            <i class="fas fa-file-code"></i>ConfigMap
                        </button>
                        <button class="template-btn" data-template="k8s-secret">
                            <i class="fas fa-key"></i>Secret
                        </button>
                        <button class="template-btn" data-template="k8s-ingress">
                            <i class="fas fa-sign-in-alt"></i>Ingress
                        </button>
                        <button class="template-btn" data-template="k8s-volume">
                            <i class="fas fa-hdd"></i>Volume
                        </button>
                        <button class="template-btn" data-template="k8s-namespace">
                            <i class="fas fa-folder-open"></i>Namespace
                        </button>
                    </div>
                </div>

                <div class="template-category">
                    <div class="category-header" data-category="network">
                        <i class="fas fa-network-wired"></i>
                        <span>Network</span>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div class="template-items">
                        <button class="template-btn" data-template="router">
                            <i class="fas fa-wifi"></i>Router
                        </button>
                        <button class="template-btn" data-template="firewall">
                            <i class="fas fa-shield-alt"></i>Firewall
                        </button>
                        <button class="template-btn" data-template="switch">
                            <i class="fas fa-ethernet"></i>Switch
                        </button>
                    </div>
                </div>

                <div class="template-category">
                    <div class="category-header" data-category="business">
                        <i class="fas fa-briefcase"></i>
                        <span>Business</span>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div class="template-items">
                        <button class="template-btn" data-template="user">
                            <i class="fas fa-user"></i>User
                        </button>
                        <button class="template-btn" data-template="users">
                            <i class="fas fa-users"></i>Users
                        </button>
                        <button class="template-btn" data-template="folder">
                            <i class="fas fa-folder"></i>Folder
                        </button>
                        <button class="template-btn" data-template="file">
                            <i class="fas fa-file"></i>File
                        </button>
                        <button class="template-btn" data-template="envelope">
                            <i class="fas fa-envelope"></i>Email
                        </button>
                        <button class="template-btn" data-template="calendar">
                            <i class="fas fa-calendar"></i>Calendar
                        </button>
                    </div>
                </div>

                <div class="template-category">
                    <div class="category-header" data-category="devices">
                        <i class="fas fa-laptop"></i>
                        <span>Devices</span>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div class="template-items">
                        <button class="template-btn" data-template="desktop">
                            <i class="fas fa-desktop"></i>Desktop
                        </button>
                        <button class="template-btn" data-template="laptop">
                            <i class="fas fa-laptop"></i>Laptop
                        </button>
                        <button class="template-btn" data-template="mobile">
                            <i class="fas fa-mobile-alt"></i>Mobile
                        </button>
                        <button class="template-btn" data-template="tablet">
                            <i class="fas fa-tablet-alt"></i>Tablet
                        </button>
                    </div>
                </div>

                <div class="template-category">
                    <div class="category-header" data-category="symbols">
                        <i class="fas fa-icons"></i>
                        <span>Symbols</span>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div class="template-items">
                        <button class="template-btn" data-template="gear">
                            <i class="fas fa-cog"></i>Settings
                        </button>
                        <button class="template-btn" data-template="lock">
                            <i class="fas fa-lock"></i>Lock
                        </button>
                        <button class="template-btn" data-template="shield">
                            <i class="fas fa-shield-alt"></i>Shield
                        </button>
                        <button class="template-btn" data-template="key">
                            <i class="fas fa-key"></i>Key
                        </button>
                        <button class="template-btn" data-template="bell">
                            <i class="fas fa-bell"></i>Notification
                        </button>
                        <button class="template-btn" data-template="check">
                            <i class="fas fa-check-circle"></i>Success
                        </button>
                        <button class="template-btn" data-template="warning">
                            <i class="fas fa-exclamation-triangle"></i>Warning
                        </button>
                        <button class="template-btn" data-template="clock">
                            <i class="fas fa-clock"></i>Clock
                        </button>
                    </div>
                </div>
            </div>
            <canvas id="canvas"></canvas>

            <!-- Zoom Indicator -->
            <div id="zoomIndicator" class="zoom-indicator">
                <span id="zoomPercentage">100%</span>
            </div>

            <!-- Context Menu -->
            <div id="contextMenu" class="context-menu">
                <div class="context-menu-item" id="contextCopy">
                    <i class="fas fa-copy"></i>
                    <span>Copy</span>
                    <kbd>Ctrl+C</kbd>
                </div>
                <div class="context-menu-item" id="contextCopyAsImage">
                    <i class="fas fa-image"></i>
                    <span>Copy as Image</span>
                </div>
                <div class="context-menu-item" id="contextPaste">
                    <i class="fas fa-paste"></i>
                    <span>Paste</span>
                    <kbd>Ctrl+V</kbd>
                </div>
                <div class="context-menu-item" id="contextDuplicate">
                    <i class="fas fa-clone"></i>
                    <span>Duplicate</span>
                    <kbd>Ctrl+D</kbd>
                </div>
                <div class="context-menu-divider"></div>
                <div class="context-menu-item" id="contextDelete">
                    <i class="fas fa-trash"></i>
                    <span>Delete</span>
                    <kbd>Del</kbd>
                </div>
                <div class="context-menu-divider"></div>
                <div class="context-menu-item" id="contextBringFront">
                    <i class="fas fa-arrow-up"></i>
                    <span>Bring to Front</span>
                </div>
                <div class="context-menu-item" id="contextSendBack">
                    <i class="fas fa-arrow-down"></i>
                    <span>Send to Back</span>
                </div>
                <div class="context-menu-divider"></div>
                <div class="context-menu-item" id="contextLock">
                    <i class="fas fa-lock"></i>
                    <span>Lock/Unlock</span>
                    <kbd>Ctrl+L</kbd>
                </div>
            </div>

            <!-- Page Navigation Controls -->
            <div id="pageNavigation" class="page-navigation">
                <button id="prevPage" class="page-nav-btn" title="Previous Page">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button id="playPages" class="page-nav-btn" title="Play Slideshow (2s delay)">
                    <i class="fas fa-play"></i>
                </button>
                <div class="page-info">
                    <span id="pageCounter">Page 1 of 1</span>
                </div>
                <button id="nextPage" class="page-nav-btn" title="Next Page">
                    <i class="fas fa-chevron-right"></i>
                </button>
                <button id="addPage" class="page-nav-btn page-add-btn" title="Add New Page (Clone Current)">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
        </div>

        <!-- Keyboard Shortcuts Help Panel -->
        <!-- Changelog Panel -->
        <div id="changelogPanel" class="help-panel">
            <div class="help-content">
                <h2>What's New</h2>
                <div class="changelog-content">
                    <!-- Populated by JavaScript -->
                </div>
                <div class="help-footer">
                    Press <kbd>Esc</kbd> to close
                </div>
            </div>
        </div>

        <div id="helpPanel" class="help-panel">
            <div class="help-content">
                <h2>Keyboard Shortcuts</h2>
                <div class="help-grid-compact">
                    <div class="help-section">
                        <h3>Tools</h3>
                        <div class="shortcut"><kbd>V</kbd><span>Select</span></div>
                        <div class="shortcut"><kbd>R</kbd><span>Rectangle</span></div>
                        <div class="shortcut"><kbd>L</kbd><span>Line</span></div>
                        <div class="shortcut"><kbd>A</kbd><span>Arrow</span></div>
                        <div class="shortcut"><kbd>P</kbd><span>Pen</span></div>
                        <div class="shortcut"><kbd>T</kbd><span>Text</span></div>
                        <div class="shortcut"><kbd>H</kbd><span>Hand/Pan</span></div>
                    </div>
                    <div class="help-section">
                        <h3>Quick Create (Shift+#)</h3>
                        <div class="shortcut"><kbd>Shift+1</kbd><span>Rectangle</span></div>
                        <div class="shortcut"><kbd>Shift+2</kbd><span>Circle</span></div>
                        <div class="shortcut"><kbd>Shift+3</kbd><span>Diamond</span></div>
                        <div class="shortcut"><kbd>Shift+4</kbd><span>Parallelogram</span></div>
                        <div class="shortcut"><kbd>Shift+5</kbd><span>Rounded Rect</span></div>
                        <div class="shortcut"><kbd>Shift+6</kbd><span>Triangle</span></div>
                        <div class="shortcut"><kbd>Shift+7</kbd><span>Hexagon</span></div>
                    </div>
                    <div class="help-section">
                        <h3>Quick Create (cont.)</h3>
                        <div class="shortcut"><kbd>Shift+8</kbd><span>Line</span></div>
                        <div class="shortcut"><kbd>Shift+9</kbd><span>Arrow</span></div>
                        <div class="shortcut"><kbd>Shift+0</kbd><span>Text</span></div>
                        <p style="font-size: 10px; margin-top: 8px; opacity: 0.7; line-height: 1.3;">Creates at center with last used style (persists across sessions)</p>
                    </div>
                    <div class="help-section">
                        <h3>Edit</h3>
                        <div class="shortcut"><kbd>Ctrl/⌘+A</kbd><span>Select All</span></div>
                        <div class="shortcut"><kbd>Ctrl/⌘+C</kbd><span>Copy</span></div>
                        <div class="shortcut"><kbd>Ctrl/⌘+V</kbd><span>Paste</span></div>
                        <div class="shortcut"><kbd>Ctrl/⌘+D</kbd><span>Duplicate</span></div>
                        <div class="shortcut"><kbd>Ctrl/⌘+Z</kbd><span>Undo</span></div>
                        <div class="shortcut"><kbd>Del</kbd><span>Delete</span></div>
                        <div class="shortcut"><kbd>Arrows</kbd><span>Move 1px</span></div>
                        <div class="shortcut"><kbd>Shift+Arrows</kbd><span>Move 10px</span></div>
                    </div>
                    <div class="help-section">
                        <h3>View & Other</h3>
                        <div class="shortcut"><kbd>G</kbd><span>Toggle Grid</span></div>
                        <div class="shortcut"><kbd>Shift+G</kbd><span>Snap to Grid</span></div>
                        <div class="shortcut"><kbd>Shift+R</kbd><span>Toggle Rulers</span></div>
                        <div class="shortcut"><kbd>Space</kbd><span>Pan Canvas</span></div>
                        <div class="shortcut"><kbd>C</kbd><span>Connect Mode</span></div>
                        <div class="shortcut"><kbd>M</kbd><span>Duplicate Last</span></div>
                        <div class="shortcut"><kbd>Ctrl/⌘+L</kbd><span>Lock/Unlock</span></div>
                        <div class="shortcut"><kbd>?</kbd><span>This Help</span></div>
                    </div>
                </div>
                <div class="help-footer">
                    Press <kbd>?</kbd> or <kbd>Esc</kbd> to close
                </div>
            </div>
        </div>
    </div>

    <!-- Export Format Modal -->
    <div id="exportModal" class="modal">
        <div class="modal-content export-modal">
            <h3>Choose Export Format</h3>
            <div class="export-format-grid">
                <button class="export-format-btn" data-format="png">
                    <i class="fas fa-image"></i>
                    <span>PNG</span>
                    <small>Raster image</small>
                </button>
                <button class="export-format-btn" data-format="jpg">
                    <i class="fas fa-image"></i>
                    <span>JPG</span>
                    <small>Compressed image</small>
                </button>
                <button class="export-format-btn" data-format="svg">
                    <i class="fas fa-vector-square"></i>
                    <span>SVG</span>
                    <small>Vector graphic</small>
                </button>
                <button class="export-format-btn" data-format="pptx">
                    <i class="fas fa-file-powerpoint"></i>
                    <span>PowerPoint</span>
                    <small>PPTX presentation</small>
                </button>
            </div>
            <button class="modal-close-btn" id="exportModalClose">Cancel</button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
